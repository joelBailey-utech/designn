<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout</title>

<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAV BAR -->

        
        
 <div class="nav_bar">
    <a href="ecommers.html">Products</a>
    <a href="about_us.html">About Us</a>
    <a href="cart.html">Cart</a>
    <a href="checkout.html">Checkout</a>
</div>
    

<div class="container">
    <h1>Checkout</h1>

    <div class="cart-summary" id="cartSummary"></div>

    <p class="total-price" id="totalPrice"></p>

    <h2>Shipping Details</h2>
    <form id="shippingForm">
        <input type="text" id="shipName" placeholder="Full Name" required>
        <input type="email" id="shipEmail" placeholder="Email Address" required>
        <textarea id="shipAddress" placeholder="Shipping Address" rows="3" required></textarea>
    </form>

    <div>
        <button id="confirmBtn">Confirm</button>
        <button id="cancelBtn">Cancel</button>
        <button id="clearBtn">Clear All</button>
    </div>
</div>

<script>
const USD_TO_JMD = 155;
let cart = JSON.parse(localStorage.getItem("cart")) || [];

const cartSummary = document.getElementById("cartSummary");
const totalPriceEl = document.getElementById("totalPrice");
const confirmBtn = document.getElementById("confirmBtn");
const cancelBtn = document.getElementById("cancelBtn");
const clearBtn = document.getElementById("clearBtn");

function renderCart() {
    cartSummary.innerHTML = "";
    if(cart.length === 0){
        cartSummary.innerHTML = "<p>Your cart is empty.</p>";
        totalPriceEl.textContent = "";
        confirmBtn.style.display = "none";
        return;
    }
    confirmBtn.style.display = "inline-block";

    let total = 0;
    cart.forEach(item => {
        total += item.price * item.quantity;
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `<span>${item.name} x${item.quantity}</span> <span>$${(item.price*item.quantity).toFixed(2)}</span>`;
        cartSummary.appendChild(div);
    });

    totalPriceEl.textContent = `Total: $${total.toFixed(2)} | JMD: J$${(total*USD_TO_JMD).toFixed(2)}`;
}

confirmBtn.addEventListener("click", function() {
    const name = document.getElementById("shipName").value.trim();
    const email = document.getElementById("shipEmail").value.trim();
    const address = document.getElementById("shipAddress").value.trim();

    if(!name || !email || !address){
        alert("Please fill in all shipping details!");
        return;
    }

    alert(`Thank you ${name}!\nYour order has been placed.\nTotal: ${totalPriceEl.textContent}`);
    localStorage.removeItem("cart");
    cart = [];
    renderCart();
    document.getElementById("shippingForm").reset();
});

cancelBtn.addEventListener("click", function() {
    window.location.href = "cart.html";
});

clearBtn.addEventListener("click", function() {
    if(confirm("Are you sure you want to clear the cart?")){
        localStorage.removeItem("cart");
        cart = [];
        renderCart();
    }
});

renderCart();
</script>

</body>
</html>

